#!/usr/bin/env bash
set -euo pipefail

# Pre-commit hook: run formatting, clippy and tests inside Nix devShell if available
if command -v nix >/dev/null 2>&1; then
  echo "ğŸ”§ Running pre-commit checks inside Nix devShell..."
  nix develop --command just pre-commit
else
  echo "âš ï¸  Nix not found; running pre-commit via just (may fail if native deps missing)..."
  just pre-commit
fi
